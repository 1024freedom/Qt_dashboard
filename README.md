# Qt动态速度表盘

一个基于Qt框架开发的动态速度表盘组件，具有精美的UI设计和流畅的动画效果。

## 功能特点

- 🎯 **动态指针**：速度指针平滑过渡，模拟真实仪表盘效果
- 🎨 **渐变背景**：使用径向渐变创建立体感表盘
- 📏 **精确刻度**：60个刻度均匀分布，主刻度带数值显示
- ⚠️ **警告区域**：高速区域（160km/h以上）以红色警示
- 🔄 **自动演示**：内置定时器自动演示速度变化
- 🖥️ **自适应尺寸**：根据窗口大小自动调整表盘尺寸

## 技术实现

### 核心类
- `QPainter`：用于所有绘图操作
- `QTimer`：控制速度变化动画
- `QRadialGradient`：创建渐变背景效果

### 关键技术点

1. **坐标系变换**
   - 使用`translate()`将原点移动到窗口中心
   - 使用`rotate()`旋转坐标系实现刻度分布
   - 使用`save()`和`restore()`管理坐标系状态

2. **刻度值定位**
   - 通过三角函数计算圆周上的点坐标：
     ```cpp
     x = cos(angle_move) * r;
     y = sin(angle_move) * r;
     targetX = sqrt(x * x + y * y);
     ```
   - 平移坐标系到刻度位置并旋转文本方向

3. **渐变效果**
   - 使用`QRadialGradient`创建表盘背景和发光效果
   - 设置颜色断点实现平滑过渡

4. **动画控制**
   - 使用`QTimer`定时更新速度值
   - 通过`update()`触发重绘实现动画效果

## 构建与运行

###  prerequisites
- Qt 5.12 或更高版本
- C++11 兼容编译器

### 构建步骤
1. 克隆或下载项目源代码
2. 使用Qt Creator打开项目文件(.pro)
3. 构建项目
4. 运行应用程序

### 或使用命令行
```bash
qmake
make
./Widget
```

## 项目结构

```
SpeedDashboard/
├── Widget.h          # 主窗口类声明
├── Widget.cpp        # 主窗口类实现
├── ui_widget.h       # UI文件生成的头文件
├── widget.ui         # Qt Designer界面文件
└── README.md         # 项目说明文档
```

## 自定义配置

### 修改速度范围
在构造函数中修改`currentValue`的最大值（当前为60，对应240km/h）：
```cpp
if (currentValue >= 60) { // 修改此处的数值
    flag = true;
}
```

### 调整动画速度
修改定时器间隔（当前为50毫秒）：
```cpp
timer->setInterval(50); // 修改此处的数值
```

### 更改颜色方案
在`initCanvas()`和`drawGradation()`方法中修改颜色值：
```cpp
radialGradient0.setColorAt(1.0, QColor(Qt::red)); // 修改颜色
```

## 扩展建议

1. **添加实际数据源**：替换演示用的定时器，连接真实的速度数据源
2. **增加设置界面**：允许用户自定义颜色方案和速度范围
3. **实现多主题支持**：添加日间/夜间模式切换功能
4. **优化性能**：对于嵌入式设备，可以考虑减少重绘频率或使用硬件加速


## 贡献

作为练习项目 有很大的优化空间 欢迎提交Issue和Pull Request来改进这个项目。
